<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Convenience Function to (recursively) find all files in a folder. — findSamples • SpliceWiz</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Convenience Function to (recursively) find all files in a folder. — findSamples"><meta property="og:description" content="Often, files e.g. raw sequencing FASTQ files, alignment BAM files,
or processBAM output files, are stored in a single folder under some
directory structure.
They can be grouped by being in common directory or having common names.
Often, their sample names can be gleaned by these common names or the names
of the folders in which they are contained.
This function (recursively) finds all files and
extracts sample names assuming either the files are named by sample names
(level = 0), or that their names can be derived from the
parent folder (level = 1). Higher level also work (e.g. level = 2)
mean the parent folder of the parent folder of the file is named by sample
names. See details section below."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SpliceWiz</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/SW_Cookbook.html">SpliceWiz: the cookbook</a>
    </li>
    <li>
      <a href="../articles/SW_QuickStart.html">SpliceWiz: Quick Start</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/alexchwong/SpliceWiz/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convenience Function to (recursively) find all files in a folder.</h1>
    <small class="dont-index">Source: <a href="https://github.com/alexchwong/SpliceWiz/blob/HEAD/R/File_finders.R" class="external-link"><code>R/File_finders.R</code></a></small>
    <div class="hidden name"><code>findSamples.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Often, files e.g. raw sequencing FASTQ files, alignment BAM files,
or <a href="processBAM.html">processBAM</a> output files, are stored in a single folder under some
directory structure.
They can be grouped by being in common directory or having common names.
Often, their sample names can be gleaned by these common names or the names
of the folders in which they are contained.
This function (recursively) finds all files and
extracts sample names assuming either the files are named by sample names
(<code>level = 0</code>), or that their names can be derived from the
parent folder (<code>level = 1</code>). Higher <code>level</code> also work (e.g. <code>level = 2</code>)
mean the parent folder of the parent folder of the file is named by sample
names. See details section below.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">findSamples</span><span class="op">(</span><span class="va">sample_path</span>, suffix <span class="op">=</span> <span class="st">".txt.gz"</span>, level <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">findFASTQ</span><span class="op">(</span></span>
<span>  <span class="va">sample_path</span>,</span>
<span>  paired <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  fastq_suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".fastq"</span>, <span class="st">".fq"</span>, <span class="st">".fastq.gz"</span>, <span class="st">".fq.gz"</span><span class="op">)</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">findBAMS</span><span class="op">(</span><span class="va">sample_path</span>, level <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">findSpliceWizOutput</span><span class="op">(</span><span class="va">sample_path</span>, level <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sample_path</dt>
<dd><p>The path in which to recursively search for files
that match the given <code>suffix</code></p></dd>


<dt>suffix</dt>
<dd><p>A vector of or or more strings that specifies the file suffix
(e.g. '.bam' denotes BAM files, whereas ".txt.gz" denotes gzipped txt
files).</p></dd>


<dt>level</dt>
<dd><p>Whether sample names can be found in the file names themselves
(level = 0), or their parent directory (level = 1). Potentially parent
of parent directory (level = 2). Support max level &lt;= 3 (for sanity).</p></dd>


<dt>paired</dt>
<dd><p>Whether to expect single FASTQ files (of the format
"sample.fastq"), or
paired files (of the format "sample_1.fastq", "sample_2.fastq")</p></dd>


<dt>fastq_suffix</dt>
<dd><p>The name of the FASTQ suffix. Options are:
".fastq", ".fastq.gz", ".fq", or ".fq.gz"</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A multi-column data frame with the first column containing
the sample name, and subsequent columns being the file paths with suffix
as determined by <code>suffix</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Paired FASTQ files are assumed to be named using the suffix <code>_1</code> and <code>_2</code>
after their common names; e.g. <code>sample_1.fastq</code>, <code>sample_2.fastq</code>. Alternate
FASTQ suffixes for <code>findFASTQ()</code> include ".fq", ".fastq.gz", and ".fq.gz".</p>
<p>In BAM files, often the parent directory denotes their sample names. In this
case, use <code>level = 1</code> to automatically annotate the sample names using
<code>findBAMS()</code>.</p>
<p><a href="processBAM.html">processBAM</a> outputs two files per BAM processed. These are named by the
given sample names. The text output is named "sample1.txt.gz", and the COV
file is named "sample1.cov", where <code>sample1</code> is the name of the sample. These
files can be organised / tabulated using the function <code>findSpliceWizOutput</code>.
The generic function <code>findSamples</code> will organise the <a href="processBAM.html">processBAM</a> text output
files but exclude the COV files. Use the latter as the <code>Experiment</code> in
<a href="collateData.html">collateData</a> if one decides to collate an experiment without linked COV
files, for portability reasons.</p>
    </div>
    <div id="functions">
    <h2>Functions</h2>
    
<ul><li><p><code>findSamples</code>: Finds all files with the given suffix pattern.
Annotates sample names based on file or parent folder names.</p></li>
<li><p><code>findFASTQ</code>: Use findSamples() to return all FASTQ files
in a given folder</p></li>
<li><p><code>findBAMS</code>: Use findSamples() to return all BAM files in a
given folder</p></li>
<li><p><code>findSpliceWizOutput</code>: Use findSamples() to return all processBAM output
files in a given folder, including COV files</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Retrieve all BAM files in a given folder, named by sample names</span></span></span>
<span class="r-in"><span><span class="va">bam_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">example_bams</span><span class="op">(</span>path <span class="op">=</span> <span class="va">bam_path</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/var/folders/xy/6ybn2drx76lblc_fqhfwt8qw0000gr/T//Rtmpd5xBOp/02H003.bam"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2] "/var/folders/xy/6ybn2drx76lblc_fqhfwt8qw0000gr/T//Rtmpd5xBOp/02H025.bam"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "/var/folders/xy/6ybn2drx76lblc_fqhfwt8qw0000gr/T//Rtmpd5xBOp/02H026.bam"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "/var/folders/xy/6ybn2drx76lblc_fqhfwt8qw0000gr/T//Rtmpd5xBOp/02H033.bam"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "/var/folders/xy/6ybn2drx76lblc_fqhfwt8qw0000gr/T//Rtmpd5xBOp/02H043.bam"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6] "/var/folders/xy/6ybn2drx76lblc_fqhfwt8qw0000gr/T//Rtmpd5xBOp/02H046.bam"</span>
<span class="r-in"><span><span class="va">df.bams</span> <span class="op">&lt;-</span> <span class="fu">findSamples</span><span class="op">(</span>sample_path <span class="op">=</span> <span class="va">bam_path</span>,</span></span>
<span class="r-in"><span>  suffix <span class="op">=</span> <span class="st">".bam"</span>, level <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># equivalent to:</span></span></span>
<span class="r-in"><span><span class="va">df.bams</span> <span class="op">&lt;-</span> <span class="fu">findBAMS</span><span class="op">(</span><span class="va">bam_path</span>, level <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Retrieve all processBAM() output files in a given folder,</span></span></span>
<span class="r-in"><span><span class="co"># named by sample names</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">expr</span> <span class="op">&lt;-</span> <span class="fu">findSpliceWizOutput</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"SpliceWiz_Output"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Find FASTQ files in a directory, named by sample names</span></span></span>
<span class="r-in"><span><span class="co"># where files are in the form:</span></span></span>
<span class="r-in"><span><span class="co"># - "./sample_folder/sample1.fastq"</span></span></span>
<span class="r-in"><span><span class="co"># - "./sample_folder/sample2.fastq"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">findFASTQ</span><span class="op">(</span><span class="st">"./sample_folder"</span>, paired <span class="op">=</span> <span class="cn">FALSE</span>, fastq_suffix <span class="op">=</span> <span class="st">".fastq"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Find paired gzipped FASTQ files in a directory, named by parent directory</span></span></span>
<span class="r-in"><span><span class="co"># where files are in the form:</span></span></span>
<span class="r-in"><span><span class="co"># - "./sample_folder/sample1/raw_1.fq.gz"</span></span></span>
<span class="r-in"><span><span class="co"># - "./sample_folder/sample1/raw_2.fq.gz"</span></span></span>
<span class="r-in"><span><span class="co"># - "./sample_folder/sample2/raw_1.fq.gz"</span></span></span>
<span class="r-in"><span><span class="co"># - "./sample_folder/sample2/raw_2.fq.gz"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">findFASTQ</span><span class="op">(</span><span class="st">"./sample_folder"</span>, paired <span class="op">=</span> <span class="cn">TRUE</span>, fastq_suffix <span class="op">=</span> <span class="st">".fq.gz"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alex Chit Hei Wong.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

